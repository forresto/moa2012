var MOA2012ANIMATION=function(a,b,c,d){function H(a){n=a.clientX-r,o=a.clientY-s}function I(a){L=!L}function J(a){a.touches.length==1&&(a.preventDefault(),n=a.touches[0].pageX-r,o=a.touches[0].pageY-s)}function K(a){a.touches.length==1&&(a.preventDefault(),n=a.touches[0].pageX-r,o=a.touches[0].pageY-s)}function R(){N&&L?(TWEEN.update(),i.rotation.x=N.x,i.rotation.y=N.y,i.rotation.z=N.z,A.opacity=N.opacity1,B.opacity=N.opacity2):(i.rotation.x=o/s*u,i.rotation.y=n/r*u),h.render(g,f)}if(!a)return!1;b||(b=720),c||(c=220),d||(d=40);var e,f,g,h,i,j,k,l,m,n=0,o=0,p=b,q=c,r=p/2,s=q/2,t=Math.PI/180,u=Math.PI/2,v=Math.floor(),w=p*1.2,x=w/2,y=d,z=Math.floor(w/y),A=new THREE.LineBasicMaterial({color:16777215,opacity:0,linewidth:3,linecap:"butt"}),B=new THREE.LineBasicMaterial({color:16777215,opacity:0,linewidth:3,linecap:"butt"}),C,D=0,E,F,G;this.init=function(){e=document.getElementById(a);var b=2;f=new THREE.OrthographicCamera(-p/b,p/b,q/b,-q/b,-3e3,3e3),f.position.z=1e3,g=new THREE.Scene,g.add(f);var c=Math.PI*2;i=new THREE.Object3D,MOA2012ANIMATION.group=i,groupGrid=new THREE.Object3D,i.add(groupGrid),g.add(i);var d=function(a){a.beginPath(),a.arc(0,0,1,0,c,!0),a.closePath(),a.fill()},j=new THREE.ParticleCanvasMaterial({color:16777215,opacity:.4,program:d}),k=3;for(var l=0;l<y;l++)for(var n=0;n<y;n++)for(var o=0;o<y;o++)Math.random()>.995&&(m=new THREE.Particle(j),m.position.x=l*z-x,m.position.y=n*z-x,m.position.z=o*z-x,m.scale.x=m.scale.y=2,groupGrid.add(m));h=new THREE.CanvasRenderer,h.setSize(p,q),e.appendChild(h.domElement),e.addEventListener("mousemove",H,!1),e.addEventListener("click",I,!1),e.addEventListener("touchstart",J,!1),e.addEventListener("touchmove",K,!1)},this.animate=function(){requestAnimationFrame(animate),R()};var L=!1,M,N,O,P,Q,L=function(a,b,c){L=!0,N={x:i.rotation.x,y:i.rotation.y,z:i.rotation.z};var d={x:a,y:b,z:c};M=(new TWEEN.Tween(N)).to(d,2e3).easing(TWEEN.Easing.Quadratic.EaseInOut).start()},S=function(){L=!0,N={x:i.rotation.x,y:i.rotation.y,z:i.rotation.z,opacity1:0,opacity2:0};var a={x:1.5708,y:0,z:0,opacity1:.8,opacity2:0},b={x:0,y:-1.5708,z:0,opacity1:0,opacity2:.8},c=(new TWEEN.Tween(N)).to(a,2e3).delay(500).onComplete(Y).easing(TWEEN.Easing.Quadratic.EaseInOut).start(),d=(new TWEEN.Tween(N)).to(a,2e3).delay(4e3).onComplete(Y).easing(TWEEN.Easing.Quadratic.EaseInOut),e=(new TWEEN.Tween(N)).to(b,2e3).delay(4e3).onComplete(Y).easing(TWEEN.Easing.Quadratic.EaseInOut);c.chain(e),e.chain(d),d.chain(e)},T=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","ä","ö"," ","-","_"],U=[[1,1,1,1,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[1,1,0,0,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,1,0,1,0,0,1,0,0,0,1,0,0,0,0,0,1,0],[1,1,1,0,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,1,1,1,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[1,1,0,0,1,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,1,0,1,1,0,0,1,0,0,0,0,0],[1,1,0,0,1,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,1,1,1,0,1,1,0,1,0,0,0,1,0,0,0,0,0],[1,1,1,1,0,0,1,0,1,1,0,0,0,0,0,1,0,0,0,0,0],[1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,1,0],[0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,1,0,0],[0,0,1,1,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[1,1,1,1,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,1],[1,1,0,0,1,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],V=function(a,b,c,d){a.vertices.push(new THREE.Vertex(new THREE.Vector3(b*z-x,c*z-x,d*z-x)))},W=function(a,b,c,d){var e=new THREE.Geometry,f=Math.floor(Math.random()*y),g=f+(Math.random()>.5?-1:1);switch(a){case 0:V(e,0+b,0+c,f),V(e,1+b,0+c,g);break;case 1:V(e,1+b,0+c,f),V(e,2+b,0+c,g);break;case 2:V(e,0+b,1+c,f),V(e,1+b,1+c,g);break;case 3:V(e,1+b,1+c,f),V(e,2+b,1+c,g);break;case 4:V(e,0+b,2+c,f),V(e,1+b,2+c,g);break;case 5:V(e,1+b,2+c,f),V(e,2+b,2+c,g);break;case 6:V(e,0+b,0+c,f),V(e,0+b,1+c,g);break;case 7:V(e,1+b,0+c,f),V(e,1+b,1+c,g);break;case 8:V(e,2+b,0+c,f),V(e,2+b,1+c,g);break;case 9:V(e,0+b,1+c,f),V(e,0+b,2+c,g);break;case 10:V(e,1+b,1+c,f),V(e,1+b,2+c,g);break;case 11:V(e,2+b,1+c,f),V(e,2+b,2+c,g);break;case 12:V(e,0+b,0+c,f),V(e,1+b,1+c,g);break;case 13:V(e,1+b,0+c,f),V(e,2+b,1+c,g);break;case 14:V(e,0+b,1+c,f),V(e,1+b,2+c,g);break;case 15:V(e,1+b,1+c,f),V(e,2+b,2+c,g);break;case 16:V(e,1+b,0+c,f),V(e,0+b,1+c,g);break;case 17:V(e,2+b,0+c,f),V(e,1+b,1+c,g);break;case 18:V(e,1+b,1+c,f),V(e,0+b,2+c,g);break;case 19:V(e,2+b,1+c,f),V(e,1+b,2+c,g);break;case 20:V(e,0+b,-0.5+c,f),V(e,2+b,-0.5+c,g);break;default:}var h=new THREE.Line(e,d);return h},X=function(a,b){var c=new THREE.Object3D,d=a.split("");for(var e=0;e<d.length;e++){var f=T.indexOf(d[e]);if(f!==-1){var g=U[f];for(var h=0;h<22;h++)g[h]===1&&c.add(W(h,e%11*3+4,Math.floor(e/11)*3+17,b))}}return c.rotation.y=Math.PI,c.rotation.z=Math.PI,c},Y=function(){D++,D>=C.length&&(D=0),G=!G,G?(E&&i.remove(E),E=X(C[D],A),E.rotation.x-=u,i.add(E)):(F&&i.remove(F),F=X(C[D],B),F.rotation.y+=u,i.add(F))};return MOA2012ANIMATION.setTexts=function(a){C=a,D=0,G=!0,E=X(C[0],A),E.rotation.x-=u,i.add(E),S()},init(),animate(),MOA2012ANIMATION};